[{"object":"block","id":"7e764a7d-c19b-4d8a-aaa9-3efb714c0b3e","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:48:00.000Z","last_edited_time":"2022-10-07T05:18:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"会社で運用しているプロジェクトで、Nuxt.js のクライアントサイドで v-html で展開する部分でエラーを吐いていた。CMS から HTML タグが返ってきてそれを画面上に描画するという仕組みになっているところだった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"会社で運用しているプロジェクトで、Nuxt.js のクライアントサイドで v-html で展開する部分でエラーを吐いていた。CMS から HTML タグが返ってきてそれを画面上に描画するという仕組みになっているところだった。","href":null}],"color":"default"}},{"object":"block","id":"ea91a92f-5700-4817-a266-0c01ac9befe5","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:17:00.000Z","last_edited_time":"2022-10-07T05:17:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"db4283e6-7013-4569-9170-ef43fd907fce","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:17:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"エラーの原因を調査をしていたのがきっかけで、client-only と Hydration の仕組みを今更ながらインプットしたので、それの覚え書きをする。Nuxt の基礎的な部分のはずだが、今までハマったことがなくきちんと理解できていない部分だったので、良い勉強の機会になった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"エラーの原因を調査をしていたのがきっかけで、client-only と Hydration の仕組みを今更ながらインプットしたので、それの覚え書きをする。Nuxt の基礎的な部分のはずだが、今までハマったことがなくきちんと理解できていない部分だったので、良い勉強の機会になった。","href":null}],"color":"default"}},{"object":"block","id":"1afe868b-7440-4d42-85ed-21cecd4a0988","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:29:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"c5c84fc2-cd5d-4eee-bf4a-3c4030e8fba6","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:29:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"（理解誤ってるところあったら教えて下さい🙇）","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"（理解誤ってるところあったら教えて下さい🙇）","href":null}],"color":"default"}},{"object":"block","id":"b23c3587-0e23-4631-9057-e93790f53c1a","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:55:00.000Z","last_edited_time":"2022-10-07T05:18:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"b74d81d0-6999-4a8e-9097-2a95f7c8fe90","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:55:00.000Z","last_edited_time":"2022-10-07T05:18:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"divider","divider":{}},{"object":"block","id":"9e95e652-f850-4aa6-adfa-8e551e082265","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:18:00.000Z","last_edited_time":"2022-10-07T05:18:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"64927f51-ffa8-4a4f-98c9-4a64fd6afa57","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:55:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回出ていたエラーは以下。内容は少し不親切に感じるが、プロダクションコード内ではなく、Nuxt 側のエラーであることはファイル名見るとだいたい分かる。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回出ていたエラーは以下。内容は少し不親切に感じるが、プロダクションコード内ではなく、Nuxt 側のエラーであることはファイル名見るとだいたい分かる。","href":null}],"color":"default"}},{"object":"block","id":"8d8dc1ec-4a3b-435d-9869-4c9f1783692a","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:07:00.000Z","last_edited_time":"2022-10-07T05:07:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"image","image":{"caption":[],"type":"file","file":{"url":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/17b32455-91e1-45aa-96b3-5b769955b086/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221013%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221013T231812Z&X-Amz-Expires=3600&X-Amz-Signature=b9cbb41493ba5be34804be5cb7247f8de4136be5a8705ab3276319a7c15c01ca&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2022-10-14T00:18:12.046Z"}}},{"object":"block","id":"c406f28e-b4a9-4e5e-ad5a-bb99e74db1fb","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:55:00.000Z","last_edited_time":"2022-10-13T23:14:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"code","code":{"caption":[],"rich_text":[{"type":"text","text":{"content":"n.setAttribute is not a function","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"n.setAttribute is not a function","href":null}],"language":"javascript"}},{"object":"block","id":"374aafaf-08de-4572-8c62-60e8211cd8fb","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:29:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"a0faa381-4f6a-4aec-8bfe-0b99b3b5e8f9","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:29:00.000Z","last_edited_time":"2022-10-07T05:30:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"DOM 由来っぽいオーラを感じたので、template 内の DOM を少しづつ消して、原因となっている箇所を地道に特定していった。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"DOM 由来っぽいオーラを感じたので、template 内の DOM を少しづつ消して、原因となっている箇所を地道に特定していった。","href":null}],"color":"default"}},{"object":"block","id":"db8ffbf7-f47c-42b8-90bb-f197a020bf52","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:29:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"802198a5-8264-4d58-9b11-da39327348d7","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:50:00.000Z","last_edited_time":"2022-10-07T05:29:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"Hydration について","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Hydration について","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"362cb91e-bd94-4e87-82a5-6b39f01c79c5","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:51:00.000Z","last_edited_time":"2022-10-07T05:21:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"そもそも Hydration の定義はこんな感じらしい（知らなかった）","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"そもそも Hydration の定義はこんな感じらしい（知らなかった）","href":null}],"color":"default"}},{"object":"block","id":"e2aede47-5f7c-438e-a349-b155455be33d","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:51:00.000Z","last_edited_time":"2022-10-07T05:03:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"quote","quote":{"rich_text":[{"type":"text","text":{"content":"静的な HTML を引き継いで、クライアントサイドのデータ変更に対応でき仮想 DOM に変換するクライアントサイドのプロセス","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"静的な HTML を引き継いで、クライアントサイドのデータ変更に対応でき仮想 DOM に変換するクライアントサイドのプロセス","href":null}],"color":"default"}},{"object":"block","id":"e257fac5-1312-4fd4-98b0-001ca83f1a75","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:03:00.000Z","last_edited_time":"2022-10-07T05:03:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"https://v3.ja.vuejs.org/guide/ssr/hydration.html","link":{"url":"https://v3.ja.vuejs.org/guide/ssr/hydration.html"}},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"https://v3.ja.vuejs.org/guide/ssr/hydration.html","href":"https://v3.ja.vuejs.org/guide/ssr/hydration.html"}],"color":"default"}},{"object":"block","id":"b2b39806-d9cc-44da-9667-9faf5f7b777c","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:58:00.000Z","last_edited_time":"2022-10-07T05:15:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"cf862b01-445d-4ef7-8966-d13775c3c1b6","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:00:00.000Z","last_edited_time":"2022-10-07T05:15:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"そして Hydration の処理内で、仮想 DOM とブラウザの HTML のギャップを確認するプロセスがあるっぽい。ここで仮想 DOM とブラウザ HTML の構造にギャップがある場合、Hydration 時にエラーを吐くらしい。今回はこれで引っかかっていた。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"そして Hydration の処理内で、仮想 DOM とブラウザの HTML のギャップを確認するプロセスがあるっぽい。ここで仮想 DOM とブラウザ HTML の構造にギャップがある場合、Hydration 時にエラーを吐くらしい。今回はこれで引っかかっていた。","href":null}],"color":"default"}},{"object":"block","id":"7078a4d5-1e67-4fa9-b11c-8bae73da8f08","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:58:00.000Z","last_edited_time":"2022-10-07T05:15:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"3337b709-9e98-43f1-83ea-080526763b50","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:58:00.000Z","last_edited_time":"2022-10-07T05:25:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"僕たちのプロダクトは、SEO 的な評価の担保（Google にきちんとインデックスさせる必要）や・シェアしたときにきちんと OGP が表示されるというのが要件にあるので、静的に HTML を生成してやる必要がある。静的な HTML の生成には CMS からデータを取得する部分があり、記事の本文やタイトルをビルド時に取得している。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"僕たちのプロダクトは、SEO 的な評価の担保（Google にきちんとインデックスさせる必要）や・シェアしたときにきちんと OGP が表示されるというのが要件にあるので、静的に HTML を生成してやる必要がある。静的な HTML の生成には CMS からデータを取得する部分があり、記事の本文やタイトルをビルド時に取得している。","href":null}],"color":"default"}},{"object":"block","id":"e1409878-521b-4892-ba8a-8ddc6e3392b8","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:00:00.000Z","last_edited_time":"2022-10-07T05:24:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"6096d802-dca9-48c0-b9fd-e9fe51ebbcdf","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:00:00.000Z","last_edited_time":"2022-10-07T05:26:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回エラーが起きていた箇所の調査を進めると、CMS からデータを取得して v-html でレンダリング *1 する部分にギャップを発生する要因があったということが分かった。具体で言うと、テーブルタグの構造が誤っていた。table タグ直下に p タグが来るみたいな構造になってしまっており、静的な HTML の生成が、DOM 構造的に NG なものとなっていた。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回エラーが起きていた箇所の調査を進めると、CMS からデータを取得して v-html でレンダリング *1 する部分にギャップを発生する要因があったということが分かった。具体で言うと、テーブルタグの構造が誤っていた。table タグ直下に p タグが来るみたいな構造になってしまっており、静的な HTML の生成が、DOM 構造的に NG なものとなっていた。","href":null}],"color":"default"}},{"object":"block","id":"0001be57-c983-48e2-9bd0-bf94dcaed7ae","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:54:00.000Z","last_edited_time":"2022-10-07T05:03:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"b40e1062-6cba-423c-a5ce-d002035d8bd1","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:54:00.000Z","last_edited_time":"2022-10-07T05:04:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"ブラウザの仕様について","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ブラウザの仕様について","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"f36d54c9-39df-4f87-9d4a-fda281484651","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:04:00.000Z","last_edited_time":"2022-10-07T05:26:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"少し脱線するが、ブラウザ側の機能で、誤った構造の HTML を自動で補正してくれる機能があるらしい。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"少し脱線するが、ブラウザ側の機能で、誤った構造の HTML を自動で補正してくれる機能があるらしい。","href":null}],"color":"default"}},{"object":"block","id":"da78f0a1-326c-4390-bff2-89fac49a4929","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:26:00.000Z","last_edited_time":"2022-10-07T05:26:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"a164f66f-2e92-426e-a567-15c0f4760d3c","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:26:00.000Z","last_edited_time":"2022-10-07T05:27:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"DOM 構造的に NG なものがあるとなぜ仮想 DOM とブラウザ HTML の間にギャップが発生し、エラーが出てしまうのかと言うと、ブラウザ側が補正した HTML と、静的生成された誤った構造の HTML にギャップがあったからというわけだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"DOM 構造的に NG なものがあるとなぜ仮想 DOM とブラウザ HTML の間にギャップが発生し、エラーが出てしまうのかと言うと、ブラウザ側が補正した HTML と、静的生成された誤った構造の HTML にギャップがあったからというわけだ。","href":null}],"color":"default"}},{"object":"block","id":"f16344b6-5d14-4e34-a07f-c74a17abc2fd","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:54:00.000Z","last_edited_time":"2022-10-07T05:05:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"771e97d9-b9fd-46f1-a95b-a2f66b3196ad","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:54:00.000Z","last_edited_time":"2022-10-07T05:27:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"ブラウザ HTML 側では誤った構造になっていた table タグは無視されて、静的な HTML の方（仮想 DOM）には table タグが存在するみたいな状態になっていた。どおりでエラーを吐くわけだ。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"ブラウザ HTML 側では誤った構造になっていた table タグは無視されて、静的な HTML の方（仮想 DOM）には table タグが存在するみたいな状態になっていた。どおりでエラーを吐くわけだ。","href":null}],"color":"default"}},{"object":"block","id":"08ecf931-a0fe-4681-a43e-e8f1a0b27a73","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T04:56:00.000Z","last_edited_time":"2022-10-07T05:06:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"client-only タグについて","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"client-only タグについて","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"584771d3-0a3c-4ee0-8c54-94b7e98fc0ca","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:06:00.000Z","last_edited_time":"2022-10-07T05:27:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"囲んだ箇所は静的な HTML として吐き出されなくなるという仕様。yarn generate 時に dist 配下に静的なページが生成され、HTML が生まれるが、client-only タグで囲んだ箇所はタグが生成されない。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"囲んだ箇所は静的な HTML として吐き出されなくなるという仕様。yarn generate 時に dist 配下に静的なページが生成され、HTML が生まれるが、client-only タグで囲んだ箇所はタグが生成されない。","href":null}],"color":"default"}},{"object":"block","id":"3045d046-1bf3-4f57-b8c9-f6319a0793e3","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:27:00.000Z","last_edited_time":"2022-10-07T05:27:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"c2e86bed-3250-49f3-817e-9c81aab2db0b","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:27:00.000Z","last_edited_time":"2022-10-07T05:28:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この部分に関してはそもそもの HTML がないので Hydration の差分チェック対象にならない。今回は、該当箇所に ","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この部分に関してはそもそもの HTML がないので Hydration の差分チェック対象にならない。今回は、該当箇所に ","href":null},{"type":"text","text":{"content":"client-only","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":true,"color":"default"},"plain_text":"client-only","href":null},{"type":"text","text":{"content":" を付けるという対応をした。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":" を付けるという対応をした。","href":null}],"color":"default"}},{"object":"block","id":"3fd10e3a-f2b5-4c01-a807-534326d3cec1","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:10:00.000Z","last_edited_time":"2022-10-07T05:28:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"image","image":{"caption":[{"type":"text","text":{"content":"client-only タグの仕様を調査","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"client-only タグの仕様を調査","href":null}],"type":"file","file":{"url":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/5d075dac-1859-4dd6-ade6-e1d0363f47f0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221013%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221013T231812Z&X-Amz-Expires=3600&X-Amz-Signature=06343a5b81f679d74a2f491537aa6ad1773f85f977954e7c1853ec9450a3946d&X-Amz-SignedHeaders=host&x-id=GetObject","expiry_time":"2022-10-14T00:18:12.050Z"}}},{"object":"block","id":"3fb2b334-bff3-4f3c-9ab9-34ec00d94451","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:06:00.000Z","last_edited_time":"2022-10-07T05:10:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"4bb68aa6-8dee-4e18-9776-81d2bd525916","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:06:00.000Z","last_edited_time":"2022-10-07T05:06:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"今回どうしたか","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回どうしたか","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"3bd3c11f-7727-4fa3-a363-84c855a60e59","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:06:00.000Z","last_edited_time":"2022-10-07T05:32:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"データ入稿時に誤ったタグを入れないように注意するというのはそれはそうだが、セーフティーネット的に client-only タグを入れておくことにした。client-only を入れた箇所は SEO 的に弱くなってしまう懸念が少しあるが、運用ミスでエラーが出るよりはマシという判断をした。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"データ入稿時に誤ったタグを入れないように注意するというのはそれはそうだが、セーフティーネット的に client-only タグを入れておくことにした。client-only を入れた箇所は SEO 的に弱くなってしまう懸念が少しあるが、運用ミスでエラーが出るよりはマシという判断をした。","href":null}],"color":"default"}},{"object":"block","id":"f92c790b-d488-44eb-abe6-5a2a1a58d964","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:09:00.000Z","last_edited_time":"2022-10-07T05:32:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}},{"object":"block","id":"18bd41a4-801c-4967-9452-3db73fe948e6","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:09:00.000Z","last_edited_time":"2022-10-07T05:25:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"divider","divider":{}},{"object":"block","id":"0eb972c7-36d1-4151-8539-10c637d2b5d1","parent":{"type":"page_id","page_id":"27b3d486-fde3-4fc3-a99b-7a7618372a6f"},"created_time":"2022-10-07T05:25:00.000Z","last_edited_time":"2022-10-07T05:25:00.000Z","created_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"last_edited_by":{"object":"user","id":"ee018de1-6ec8-4b1e-a645-9702282647d1"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"*1 「CMS から HTML 返すなよ」というのはそれはそうなのだけれども、諸々の社内の事情があるということを察してもらえればと思う。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"*1 「CMS から HTML 返すなよ」というのはそれはそうなのだけれども、諸々の社内の事情があるということを察してもらえればと思う。","href":null}],"color":"default"}}]